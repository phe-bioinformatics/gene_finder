#%Module1.0#####################################################################
##
## modules modulefile
##
## modulefiles/modules.  Generated from modules.in by configure.
##

# for Tcl script use only
set     name            gene_finder
set     version         2-2
#set modroot /phengs/hpc_software/wgs_pipelines/software/phe/workflows/components/$name/$version
set modroot /phengs/hpc_software/phe/workflows/components/$name/$version
#set modroot /phengs/hpc_storage/home/matthew/py/$name/$version

proc ModulesHelp { } {
        global name version modroot

        puts stderr "\t$name - Version $version - loads the $name software & application environment"
        puts stderr "\n\tBy default does not load a phe/phe_ref modulefile for $name. It is therefore"
        puts stderr "\tby default necessary specifically to pass to ${name}.py a path to a reference dir."
        puts stderr "\tThe pre-requisite for automated load of a workflow-specific phe/phe_ref modulefile"
        puts stderr "\tis the command `export WORKFLOW_NAME=<workflow_name>`, where <workflow_name>"
        puts stderr "\tlacks the trailing .<wf_version>. This command is executed by all qsub scripts"
        puts stderr "\tgenerated by newCAS. These scripts consequently implicitly load the latest version"
        puts stderr "\tof modulefile phe/phe_ref/<WORKFLOW_NAME>/${name}_reference."

        puts stderr "\n\tFor workflows 'escherichia-coli-typing' and 'listeria-typing' the loaded modulefiles"
        puts stderr "\tare phe/phe_ref/<WORKFLOW_NAME>/gastro_serotyping_reference."

        puts stderr "\n\tThis adds $modroot/* to several of the"
        puts stderr "\tenvironment variables.\n"

}

module-whatis "loads the $name environment and, optionally, reference_sets.
                See 'module help' to understand its reference-loading behaviours.\n"

if { [info exists ::env(WORKFLOW_NAME)] } {
    if { $::env(WORKFLOW_NAME) == "escherichia-coli-typing" } {
        module load phe/phe_ref/$::env(WORKFLOW_NAME)/gastro_serotyping_reference
    } elseif { $::env(WORKFLOW_NAME) == "listeria-typing" } {
        module load phe/phe_ref/$::env(WORKFLOW_NAME)/gastro_serotyping_reference
    } else {
        module load phe/phe_ref/$::env(WORKFLOW_NAME)/gene_finder_reference
    }
}

prepend-path PATH           $modroot
prepend-path PYTHONPATH     $modroot
prepend-path PYTHONPATH     $modroot/modules
module load python/2.7.5
module load bowtie2/2.1.0patch
module load samtools/0.1.18
module load clustalw/2.1
module load numpy/python2.7/1.7.1
module load lxml/python2.7/3.2.3
module load biopython/python2.7/1.61
module load pysam/python2.7/0.7.5
module load yaml/1.1
module load phe/common_modules

conflict	phe/$name
